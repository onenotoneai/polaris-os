<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polaris OS | 北极星系统</title>
    <!-- 1. 引入 Tailwind CSS (样式库) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. 引入 React 核心库 -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- 3. 引入 Babel (让浏览器能看懂 React 代码) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- 4. 引入 Lucide 图标 -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- 配置主题色：黑金风格 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        polaris: {
                            bg: '#1a2332',
                            gold: '#d4af37', // 核心金色
                            danger: '#dc2626',
                            text: '#e5e7eb',
                            sub: '#9ca3af'
                        }
                    },
                    fontFamily: {
                        display: ['Georgia', 'serif'], // 用通用衬线字体代替加载
                        body: ['Arial', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #1a2332; color: #e5e7eb; }
        .fade-in { animation: fadeIn 0.8s ease-out forwards; opacity: 0; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Shield, Activity, Map, ArrowRight, AlertTriangle } = lucide;

        // --- 核心组件 ---
        const App = () => {
            const [view, setView] = useState('home');

            // 首页视图
            if (view === 'home') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen p-6 text-center fade-in relative overflow-hidden">
                        {/* 背景光效 */}
                        <div className="absolute top-[-20%] left-[50%] -translate-x-1/2 w-[500px] h-[500px] bg-[#d4af37] opacity-10 blur-[100px] rounded-full pointer-events-none"></div>
                        
                        <h1 className="text-5xl md:text-7xl font-bold text-[#d4af37] mb-4 tracking-tight" style={{fontFamily: 'Georgia'}}>
                            Polaris OS
                        </h1>
                        <p className="text-gray-400 mb-12 max-w-md mx-auto">
                            识别陷阱 · 评估博弈 · 积累能力
                        </p>

                        <div className="grid gap-4 w-full max-w-md">
                            <MenuButton 
                                icon={<Shield size={24}/>} 
                                title="WindowGuard 扫描器" 
                                desc="三轴风险评估与陷阱识别"
                                onClick={() => setView('scanner')}
                            />
                            <MenuButton 
                                icon={<Activity size={24}/>} 
                                title="Game Lab (演示中)" 
                                desc="职场权力结构可视化"
                                disabled
                            />
                        </div>
                        
                        <div className="mt-12 text-xs text-gray-600 font-mono">
                            v1.0.0 | Built via Polaris Agent
                        </div>
                    </div>
                );
            }

            // 扫描器视图
            if (view === 'scanner') {
                return <ScannerView onBack={() => setView('home')} />;
            }
        };

        // 按钮组件
        const MenuButton = ({ icon, title, desc, onClick, disabled }) => (
            <button 
                onClick={disabled ? null : onClick}
                className={`flex items-center gap-4 p-5 rounded-xl border border-white/10 bg-white/5 text-left transition-all
                ${disabled ? 'opacity-50 cursor-not-allowed' : 'hover:border-[#d4af37] hover:bg-white/10 active:scale-[0.98]'}`}
            >
                <div className={disabled ? "text-gray-500" : "text-[#d4af37]"}>{icon}</div>
                <div>
                    <div className="text-white font-bold">{title}</div>
                    <div className="text-xs text-gray-400">{desc}</div>
                </div>
            </button>
        );

        // 扫描器逻辑
        const ScannerView = ({ onBack }) => {
            const [step, setStep] = useState(1);
            const [loading, setLoading] = useState(false);
            
            const handleScan = () => {
                setLoading(true);
                setTimeout(() => setStep(2), 2000); // 模拟2秒思考
            };

            return (
                <div className="min-h-screen p-6 max-w-2xl mx-auto fade-in">
                    <button onClick={onBack} className="text-gray-500 hover:text-white mb-8 text-sm">← 返回首页</button>
                    
                    {step === 1 && !loading && (
                        <div className="space-y-6">
                            <h2 className="text-3xl text-white font-serif border-l-4 border-[#d4af37] pl-4">风险扫描协议</h2>
                            
                            <div className="space-y-4">
                                <InputBox label="扫描对象" placeholder="例如：加入某创业公司的Offer" />
                                <InputBox label="轴心一：缓慢恶化" placeholder="这件事情会随着时间自然贬值吗？" />
                                <InputBox label="轴心二：不可逆点" placeholder="一旦做了，还能回头吗？" />
                                <InputBox label="轴心三：判断权" placeholder="退出的时候，需要看别人脸色吗？" />
                            </div>

                            <button onClick={handleScan} className="w-full py-4 bg-[#d4af37] text-black font-bold rounded hover:bg-yellow-500 transition-colors flex justify-center items-center gap-2">
                                开始分析 <ArrowRight size={18}/>
                            </button>
                        </div>
                    )}

                    {loading && step === 1 && (
                        <div className="text-center py-20">
                            <div className="animate-spin text-[#d4af37] mb-4">
                                <Activity size={48} />
                            </div>
                            <p className="text-[#d4af37] font-mono animate-pulse">正在检索 Playbook 负面清单...</p>
                        </div>
                    )}

                    {step === 2 && (
                        <div className="bg-red-900/20 border border-red-800 p-6 rounded-xl animate-bounce-in">
                            <div className="flex items-center gap-3 mb-4 text-[#dc2626]">
                                <AlertTriangle size={32} />
                                <h3 className="text-2xl font-bold">高风险警告 (RED)</h3>
                            </div>
                            <p className="text-gray-300 mb-4 leading-relaxed">
                                基于三轴分析，该机会呈现典型的<strong>“温水煮青蛙”</strong>结构。
                                你正在交出你的判断权，且不可逆点（Irreversible Point）将在3个月内到来。
                            </p>
                            <div className="bg-black/30 p-4 rounded text-sm text-gray-400 font-mono">
                                建议：立即制定退出策略，不要投入核心资源。
                            </div>
                            <button onClick={() => {setStep(1); setLoading(false);}} className="mt-6 w-full py-3 border border-gray-600 text-gray-300 rounded hover:bg-white/5">
                                重新扫描
                            </button>
                        </div>
                    )}
                </div>
            );
        };

        const InputBox = ({ label, placeholder }) => (
            <div>
                <label className="block text-xs text-[#d4af37] mb-1 font-mono uppercase">{label}</label>
                <textarea className="w-full bg-[#0f151f] border border-gray-700 rounded p-3 text-white focus:border-[#d4af37] outline-none" rows="2" placeholder={placeholder}></textarea>
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
